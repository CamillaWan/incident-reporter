<!-- reporter/templates/reporter/partials/incident_rows.html -->
{% for incident in incidents %}
<tr>
    <td>{{ incident.incident_date_time|date:"d M, Y H:i" }}</td>
    <td>{{ incident.incident_type }}</td>
    <td>{{ incident.severity }}</td>
    <td>{{ incident.location }}</td>
    <td>{{ incident.resident }}</td>
    <td>{{ incident.description }}</td>
    <td>{{ incident.actions_taken }}</td>
    <td>{{ incident.reporter }}</td>
    <td>{{ incident.reported_to_manager|yesno:"✅,❌" }}</td>
    <td>{{ incident.timestamp|date:"d M, Y H:i" }}</td>
</tr>
{% endfor %}

{% if has_more %}
  <script>
    const btn = document.getElementById('load-more-btn');
    if (btn) {
      btn.setAttribute('hx-get', `{% url 'load_more_incidents' %}?offset={{ next_offset }}`);
    }
  </script>
{% else %}
  <script>
    document.getElementById('load-more-wrapper')?.remove();
  </script>
{% endif %}